<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title>Logged in!</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<link href="https://unpkg.com/tabulator-tables@4.5.1/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.5.1/dist/js/tabulator.min.js"></script>
<script src="https://unpkg.com/github-api/dist/GitHub.bundle.min.js"></script>


</head>

<body>
<h1>Logged into Github...</h1>

<hr>
<address></address>
<!-- hhmts start -->Last modified: Wed Dec 11 10:29:34 PST 2019 <!-- hhmts end -->
</body>
<script>

   // We can get the token from the "access_token" query
   // param, available in the browsers "location" global
   const query = window.location.search.substring(1)
   const requestToken = query.split('code=')[1]

   const nameNode = document.createTextNode(`Code is, ${requestToken}`)
   document.body.appendChild(nameNode)

   const clientID = 'Iv1.6cb495e6740befb7'
   const clientSecret = '0c324eecd76b3487290d410a0a067dc52f8b14c0'

   $.ajax({
      url : `https://github.com/login/oauth/access_token?client_id=${clientID}&client_secret=${clientSecret}&code=${requestToken}&redirect_uri=https://lichtenberg.github.io/MSET-Tools/mset-tools.html`,
      type : 'POST',
    dataType : 'application/json',

      success: function (result) {
                //Process success actions
                var returnResult = JSON.stringify(result);
                alert('Success!\r\n' + returnResult);
                document.getElementById('callResults').innerHTML = returnResult;
                return result;
              },
      error: function (XMLHttpRequest, textStatus, errorThrown) {
                //Process error actions
                alert('Error: ' + errorThrown);
                console.log(XMLHttpRequest.status + ' ' + 
                    XMLHttpRequest.statusText);
                return false;
              }
          });


</script>


</html>
